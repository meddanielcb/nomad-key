<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nomad Key - Aluguel Descentralizado</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --text: #1a202c;
            --text-light: #4a5568;
            --bg: #f7fafc;
            --white: #ffffff;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); }
        
        /* Header */
        .header {
            background: var(--white);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .logo { display: flex; align-items: center; gap: 8px; cursor: pointer; }
        .logo i { font-size: 1.5rem; color: var(--primary); }
        .logo span { font-size: 1.25rem; font-weight: 700; background: linear-gradient(135deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .search-bar { display: flex; gap: 8px; flex: 1; max-width: 500px; margin: 0 24px; }
        .search-bar input { flex: 1; padding: 10px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 0.95rem; }
        .search-bar button { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
        .user-menu { display: flex; align-items: center; gap: 12px; }
        .wallet-badge { background: var(--bg); padding: 6px 12px; border-radius: 20px; font-size: 0.8rem; font-family: monospace; }
        .btn { padding: 10px 20px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; }
        .btn-secondary { background: #e2e8f0; color: var(--text); }
        
        /* Login Modal */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 200; }
        .modal-overlay.active { display: flex; }
        .modal { background: white; padding: 40px; border-radius: 16px; width: 100%; max-width: 420px; text-align: center; }
        .modal h2 { margin-bottom: 8px; }
        .modal p { color: var(--text-light); margin-bottom: 24px; }
        .modal input { width: 100%; padding: 14px; border: 2px solid #e2e8f0; border-radius: 8px; margin-bottom: 16px; font-size: 1rem; }
        .modal .btn { width: 100%; margin-bottom: 12px; }
        
        /* Filters */
        .filters { background: white; padding: 16px 24px; display: flex; gap: 16px; border-bottom: 1px solid #e2e8f0; overflow-x: auto; }
        .filter-item { display: flex; flex-direction: column; gap: 4px; }
        .filter-item label { font-size: 0.75rem; color: var(--text-light); font-weight: 600; }
        .filter-item select, .filter-item input { padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 0.9rem; }
        
        /* Main Layout */
        .main { display: grid; grid-template-columns: 1fr 400px; height: calc(100vh - 140px); }
        
        /* Properties Grid */
        .properties { overflow-y: auto; padding: 24px; }
        .properties-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .property-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s; }
        .property-card:hover { transform: translateY(-4px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .property-image { position: relative; height: 200px; }
        .property-image img { width: 100%; height: 100%; object-fit: cover; }
        .favorite { position: absolute; top: 12px; right: 12px; background: white; border: none; width: 32px; height: 32px; border-radius: 50%; cursor: pointer; }
        .property-info { padding: 16px; }
        .property-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .property-type { font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; font-weight: 600; }
        .rating { display: flex; align-items: center; gap: 4px; font-weight: 600; }
        .rating i { color: #f6ad55; }
        .property-title { font-size: 1rem; font-weight: 600; margin-bottom: 4px; }
        .property-location { font-size: 0.875rem; color: var(--text-light); margin-bottom: 12px; }
        .property-footer { display: flex; justify-content: space-between; align-items: center; }
        .price { font-weight: 700; }
        .price span { font-size: 0.875rem; color: var(--text-light); font-weight: normal; }
        
        /* Map */
        .map-container { height: 100%; }
        #map { height: 100%; width: 100%; }
        
        /* Property Detail Modal */
        .detail-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; z-index: 200; overflow-y: auto; }
        .detail-modal.active { display: block; }
        .detail-content { background: white; max-width: 900px; margin: 40px auto; border-radius: 16px; overflow: hidden; }
        .detail-header { position: relative; height: 400px; }
        .detail-header img { width: 100%; height: 100%; object-fit: cover; }
        .close-btn { position: absolute; top: 16px; left: 16px; background: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; }
        .detail-body { padding: 32px; display: grid; grid-template-columns: 1fr 320px; gap: 32px; }
        .detail-info h1 { font-size: 1.75rem; margin-bottom: 8px; }
        .detail-location { color: var(--text-light); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        .detail-stats { display: flex; gap: 24px; padding: 24px 0; border-top: 1px solid #e2e8f0; border-bottom: 1px solid #e2e8f0; margin-bottom: 24px; }
        .stat { display: flex; align-items: center; gap: 8px; }
        .amenities { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 16px; }
        .amenity { background: var(--bg); padding: 8px 16px; border-radius: 20px; font-size: 0.875rem; }
        .booking-card { background: white; padding: 24px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); position: sticky; top: 24px; }
        .booking-price { font-size: 1.5rem; font-weight: 700; margin-bottom: 16px; }
        .booking-form { display: flex; flex-direction: column; gap: 12px; }
        .booking-form input, .booking-form select { padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; }
        .booking-form .btn { margin-top: 8px; }
        
        /* ===== RESPONSIVE DESIGN COMPLETO ===== */
        
        /* Tablets (768px - 1024px) */
        @media (max-width: 1024px) {
            .main { grid-template-columns: 1fr 300px; }
            .detail-body { grid-template-columns: 1fr 280px; gap: 24px; }
            .properties-grid { grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); }
        }
        
        /* Tablets pequenos e smartphones grandes (481px - 767px) */
        @media (max-width: 768px) {
            .header {
                flex-wrap: wrap;
                padding: 12px 16px;
                gap: 12px;
            }
            .logo span { font-size: 1.1rem; }
            .search-bar {
                order: 3;
                max-width: 100%;
                margin: 8px 0 0 0;
                width: 100%;
            }
            .user-menu { order: 2; }
            
            .filters {
                padding: 12px 16px;
                gap: 12px;
            }
            .filter-item { min-width: 120px; }
            
            .main { grid-template-columns: 1fr; height: auto; }
            .map-container { 
                display: block; 
                height: 300px;
                position: sticky;
                top: 140px;
            }
            
            .properties { padding: 16px; }
            .properties-grid { 
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
                gap: 16px;
            }
            
            .detail-content { margin: 0; border-radius: 0; min-height: 100vh; }
            .detail-header { height: 250px; }
            .detail-body { 
                grid-template-columns: 1fr; 
                padding: 20px;
                gap: 20px;
            }
            .detail-info h1 { font-size: 1.5rem; }
            .detail-stats { 
                flex-wrap: wrap; 
                gap: 12px;
                font-size: 0.9rem;
            }
            .booking-card { position: static; }
            
            .modal { 
                margin: 20px; 
                padding: 30px 20px;
                max-width: calc(100% - 40px);
            }
        }
        
        /* Smartphones pequenos (até 480px) */
        @media (max-width: 480px) {
            .header { padding: 10px 12px; }
            .logo i { font-size: 1.25rem; }
            .logo span { font-size: 1rem; }
            .btn { padding: 8px 14px; font-size: 0.875rem; }
            
            .filters {
                padding: 10px 12px;
                gap: 8px;
            }
            .filter-item { min-width: 100px; }
            .filter-item label { font-size: 0.7rem; }
            .filter-item select, .filter-item input { 
                padding: 6px 8px; 
                font-size: 0.85rem;
            }
            
            .map-container { height: 200px; top: 120px; }
            
            .properties { padding: 12px; }
            .properties-grid { 
                grid-template-columns: 1fr; 
                gap: 12px;
            }
            .property-image { height: 180px; }
            .property-info { padding: 12px; }
            .property-title { font-size: 0.95rem; }
            
            .detail-header { height: 200px; }
            .close-btn { 
                width: 36px; 
                height: 36px;
                top: 12px;
                left: 12px;
            }
            .detail-body { padding: 16px; }
            .detail-info h1 { font-size: 1.25rem; }
            .detail-stats { 
                padding: 16px 0;
                font-size: 0.85rem;
            }
            .stat { gap: 4px; }
            .amenities { gap: 6px; }
            .amenity { 
                padding: 6px 12px; 
                font-size: 0.8rem;
            }
            .booking-price { font-size: 1.25rem; }
            
            .modal { padding: 24px 16px; }
            .modal h2 { font-size: 1.25rem; }
        }
        
        /* Telas grandes (acima de 1440px) */
        @media (min-width: 1440px) {
            .main { grid-template-columns: 1fr 500px; }
            .properties-grid { 
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); 
                gap: 24px;
            }
            .detail-content { max-width: 1200px; }
            .detail-body { grid-template-columns: 1fr 400px; }
        }
        
        /* Landscape em smartphones */
        @media (max-height: 500px) and (orientation: landscape) {
            .map-container { height: 150px; }
            .detail-header { height: 150px; }
        }
        
        /* iPhone notch e safe area */
        @supports (padding-top: env(safe-area-inset-top)) {
            .header {
                padding-top: calc(16px + env(safe-area-inset-top));
                padding-left: calc(24px + env(safe-area-inset-left));
                padding-right: calc(24px + env(safe-area-inset-right));
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo" onclick="showHome()">
            <i class="fas fa-key"></i>
            <span>Nomad Key</span>
        </div>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Para onde você vai?" onkeypress="if(event.key==='Enter')filterProperties()">
            <button onclick="filterProperties()"><i class="fas fa-search"></i></button>
        </div>
        <div class="user-menu">
            <div id="userSection" style="display:none">
                <span class="wallet-badge" id="walletDisplay"></span>
                <button class="btn btn-secondary" onclick="logout()">Sair</button>
            </div>
            <button id="loginBtn" class="btn btn-primary" onclick="showLogin()">Entrar</button>
        </div>
    </header>

    <!-- Filters -->
    <div class="filters">
        <div class="filter-item">
            <label>Tipo</label>
            <select id="typeFilter" onchange="filterProperties()">
                <option value="">Todos</option>
                <option value="Apartamento">Apartamento</option>
                <option value="Casa">Casa</option>
                <option value="Loft">Loft</option>
                <option value="Estúdio">Estúdio</option>
            </select>
        </div>
        <div class="filter-item">
            <label>Preço máx</label>
            <select id="priceFilter" onchange="filterProperties()">
                <option value="10000">Qualquer</option>
                <option value="200">R$ 200</option>
                <option value="300">R$ 300</option>
                <option value="500">R$ 500</option>
                <option value="1000">R$ 1.000</option>
            </select>
        </div>
        <div class="filter-item">
            <label>Quartos</label>
            <select id="roomFilter" onchange="filterProperties()">
                <option value="0">Qualquer</option>
                <option value="1">1+</option>
                <option value="2">2+</option>
                <option value="3">3+</option>
            </select>
        </div>
        <div class="filter-item">
            <label>Hóspedes</label>
            <select id="guestFilter" onchange="filterProperties()">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="4">4</option>
                <option value="6">6+</option>
            </select>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main">
        <div class="properties">
            <div class="properties-grid" id="propertiesGrid"></div>
        </div>
        <div class="map-container">
            <div id="map"></div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal">
            <i class="fas fa-key" style="font-size: 3rem; color: var(--primary); margin-bottom: 16px;"></i>
            <h2>Bem-vindo ao Nomad Key</h2>
            <p>Entre com seu email para criar sua wallet segura</p>
            <input type="email" id="emailInput" placeholder="seu@email.com">
            <button class="btn btn-primary" onclick="login()">Continuar com Email</button>
            <button class="btn btn-secondary" onclick="hideLogin()">Cancelar</button>
            <p style="margin-top: 16px; font-size: 0.8rem; color: var(--text-light);">
                <i class="fas fa-shield-alt"></i> Powered by Account Abstraction
            </p>
        </div>
    </div>

    <!-- Property Detail Modal -->
    <div class="detail-modal" id="detailModal">
        <div class="detail-content">
            <div class="detail-header">
                <img id="detailImage" src="" alt="">
                <button class="close-btn" onclick="hideDetail()"><i class="fas fa-arrow-left"></i></button>
            </div>
            <div class="detail-body">
                <div class="detail-info">
                    <h1 id="detailTitle"></h1>
                    <div class="detail-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span id="detailLocation"></span>
                    </div>
                    <div class="detail-stats">
                        <div class="stat"><i class="fas fa-user"></i> <span id="detailGuests"></span> hóspedes</div>
                        <div class="stat"><i class="fas fa-bed"></i> <span id="detailBedrooms"></span> quartos</div>
                        <div class="stat"><i class="fas fa-bath"></i> <span id="detailBathrooms"></span> banheiros</div>
                        <div class="stat"><i class="fas fa-star"></i> <span id="detailRating"></span></div>
                    </div>
                    <h3>Comodidades</h3>
                    <div class="amenities" id="detailAmenities"></div>
                    <h3 style="margin-top: 24px;">Sobre este espaço</h3>
                    <p style="color: var(--text-light); line-height: 1.6;">
                        Espaço aconchegante e bem localizado. Perfeito para sua estadia com total privacidade e segurança. 
                        Pagamento via PIX ou criptomoedas com proteção de smart contract.
                    </p>
                </div>
                <div class="booking-card">
                    <div class="booking-price" id="detailPrice"></div>
                    <div class="booking-form">
                        <label>Check-in</label>
                        <input type="date" id="checkin">
                        <label>Check-out</label>
                        <input type="date" id="checkout">
                        <label>Hóspedes</label>
                        <select id="bookingGuests">
                            <option>1 hóspede</option>
                            <option>2 hóspedes</option>
                            <option>3 hóspedes</option>
                            <option>4+ hóspedes</option>
                        </select>
                        <button class="btn btn-primary" onclick="bookProperty()">
                            <i class="fas fa-calendar-check"></i> Reservar
                        </button>
                    </div>
                    <div id="bookingWallet" style="margin-top: 16px; padding: 12px; background: var(--bg); border-radius: 8px; font-size: 0.85rem; display: none;">
                        <i class="fas fa-wallet" style="color: var(--primary);"></i>
                        <span id="bookingWalletAddress"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock data
        const properties = [
            {
                id: 1,
                title: "Apartamento Moderno no Centro",
                location: "São Paulo, Brasil",
                price: 250,
                rating: 4.9,
                reviews: 128,
                image: "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800",
                type: "Apartamento",
                guests: 4,
                bedrooms: 2,
                bathrooms: 1,
                lat: -23.5505,
                lng: -46.6333,
                amenities: ["WiFi", "Cozinha", "Ar condicionado", "Máquina de lavar"]
            },
            {
                id: 2,
                title: "Casa de Praia com Vista para o Mar",
                location: "Rio de Janeiro, Brasil",
                price: 450,
                rating: 4.8,
                reviews: 96,
                image: "https://images.unsplash.com/photo-1499793983690-e29da59ef1c2?w=800",
                type: "Casa",
                guests: 6,
                bedrooms: 3,
                bathrooms: 2,
                lat: -22.9068,
                lng: -43.1729,
                amenities: ["Piscina", "WiFi", "Vista para o mar", "Churrasqueira"]
            },
            {
                id: 3,
                title: "Loft Aconchegante em Bairro Boêmio",
                location: "Curitiba, Brasil",
                price: 180,
                rating: 4.7,
                reviews: 64,
                image: "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800",
                type: "Loft",
                guests: 2,
                bedrooms: 1,
                bathrooms: 1,
                lat: -25.4294,
                lng: -49.2719,
                amenities: ["WiFi", "Cozinha", "TV", "Estacionamento"]
            },
            {
                id: 4,
                title: "Mansão Luxuosa com Piscina",
                location: "Florianópolis, Brasil",
                price: 890,
                rating: 5.0,
                reviews: 42,
                image: "https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800",
                type: "Casa",
                guests: 10,
                bedrooms: 5,
                bathrooms: 4,
                lat: -27.5954,
                lng: -48.5480,
                amenities: ["Piscina", "WiFi", "Cozinha gourmet", "Vista para o mar"]
            },
            {
                id: 5,
                title: "Estúdio Compacto e Elegante",
                location: "Belo Horizonte, Brasil",
                price: 120,
                rating: 4.6,
                reviews: 85,
                image: "https://images.unsplash.com/photo-1536376072261-38c75010e6c9?w=800",
                type: "Estúdio",
                guests: 2,
                bedrooms: 1,
                bathrooms: 1,
                lat: -19.9167,
                lng: -43.9345,
                amenities: ["WiFi", "Cozinha", "TV"]
            },
            {
                id: 6,
                title: "Casa de Campo com Jardim",
                location: "Gramado, Brasil",
                price: 320,
                rating: 4.9,
                reviews: 156,
                image: "https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=800",
                type: "Casa",
                guests: 5,
                bedrooms: 3,
                bathrooms: 2,
                lat: -29.3784,
                lng: -50.8759,
                amenities: ["Lareira", "WiFi", "Cozinha", "Jardim"]
            }
        ];

        let user = null;
        let map = null;
        let markers = [];

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadUser();
            renderProperties(properties);
            initMap();
        });

        function loadUser() {
            const saved = localStorage.getItem('nomadkey_user');
            if (saved) {
                user = JSON.parse(saved);
                showUser();
            }
        }

        function showUser() {
            document.getElementById('userSection').style.display = 'flex';
            document.getElementById('loginBtn').style.display = 'none';
            document.getElementById('walletDisplay').textContent = 
                user.wallet.slice(0, 6) + '...' + user.wallet.slice(-4);
        }

        function showLogin() {
            document.getElementById('loginModal').classList.add('active');
        }

        function hideLogin() {
            document.getElementById('loginModal').classList.remove('active');
        }

        function login() {
            const email = document.getElementById('emailInput').value;
            if (!email) return;

            const wallet = '0x' + Array.from({length: 40}, () => 
                Math.floor(Math.random() * 16).toString(16)
            ).join('');

            user = { email, wallet, createdAt: new Date().toISOString() };
            localStorage.setItem('nomadkey_user', JSON.stringify(user));
            
            hideLogin();
            showUser();
        }

        function logout() {
            localStorage.removeItem('nomadkey_user');
            user = null;
            document.getElementById('userSection').style.display = 'none';
            document.getElementById('loginBtn').style.display = 'block';
        }

        function renderProperties(props) {
            const grid = document.getElementById('propertiesGrid');
            grid.innerHTML = props.map(p => `
                <div class="property-card" onclick="showDetail(${p.id})">
                    <div class="property-image">
                        <img src="${p.image}" alt="${p.title}" loading="lazy">
                        <button class="favorite" onclick="event.stopPropagation()"><i class="far fa-heart"></i></button>
                    </div>
                    <div class="property-info">
                        <div class="property-header">
                            <span class="property-type">${p.type}</span>
                            <div class="rating"><i class="fas fa-star"></i> ${p.rating}</div>
                        </div>
                        <h3 class="property-title">${p.title}</h3>
                        <p class="property-location"><i class="fas fa-map-marker-alt"></i> ${p.location}</p>
                        <div class="property-footer">
                            <div class="price">R$ ${p.price} <span>/noite</span></div>
                            <span style="color: var(--text-light); font-size: 0.875rem;">${p.reviews} avaliações</span>
                        </div>
                    </div>
                </div>
            `).join('');

            updateMapMarkers(props);
        }

        function initMap() {
            map = L.map('map').setView([-23.5505, -46.6333], 5);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap'
            }).addTo(map);
            updateMapMarkers(properties);
        }

        function updateMapMarkers(props) {
            if (!map) return;
            markers.forEach(m => map.removeLayer(m));
            markers = [];
            
            props.forEach(p => {
                const marker = L.marker([p.lat, p.lng]).addTo(map);
                marker.bindPopup(`<b>${p.title}</b><br>R$ ${p.price}/noite`);
                marker.on('click', () => showDetail(p.id));
                markers.push(marker);
            });
        }

        function filterProperties() {
            const location = document.getElementById('searchInput').value.toLowerCase();
            const type = document.getElementById('typeFilter').value;
            const maxPrice = parseInt(document.getElementById('priceFilter').value);
            const minRooms = parseInt(document.getElementById('roomFilter').value);
            const guests = parseInt(document.getElementById('guestFilter').value);

            const filtered = properties.filter(p => {
                if (location && !p.location.toLowerCase().includes(location)) return false;
                if (type && p.type !== type) return false;
                if (p.price > maxPrice) return false;
                if (minRooms && p.bedrooms < minRooms) return false;
                if (p.guests < guests) return false;
                return true;
            });

            renderProperties(filtered);
        }

        function showDetail(id) {
            const p = properties.find(x => x.id === id);
            if (!p) return;

            document.getElementById('detailImage').src = p.image;
            document.getElementById('detailTitle').textContent = p.title;
            document.getElementById('detailLocation').textContent = p.location;
            document.getElementById('detailGuests').textContent = p.guests;
            document.getElementById('detailBedrooms').textContent = p.bedrooms;
            document.getElementById('detailBathrooms').textContent = p.bathrooms;
            document.getElementById('detailRating').textContent = p.rating + ' (' + p.reviews + ' avaliações)';
            document.getElementById('detailPrice').textContent = 'R$ ' + p.price + ' /noite';
            
            document.getElementById('detailAmenities').innerHTML = p.amenities.map(a => 
                `<span class="amenity"><i class="fas fa-check"></i> ${a}</span>`
            ).join('');

            if (user) {
                document.getElementById('bookingWallet').style.display = 'block';
                document.getElementById('bookingWalletAddress').textContent = 
                    user.wallet.slice(0, 10) + '...' + user.wallet.slice(-8);
            } else {
                document.getElementById('bookingWallet').style.display = 'none';
            }

            document.getElementById('detailModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function hideDetail() {
            document.getElementById('detailModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        function bookProperty() {
            if (!user) {
                alert('Por favor, faça login primeiro');
                showLogin();
                return;
            }
            alert('Reserva simulada! Em produção, isso criaria um smart contract de escrow.');
        }

        function showHome() {
            hideDetail();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Close modal on outside click
        document.getElementById('loginModal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) hideLogin();
        });

        document.getElementById('detailModal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) hideDetail();
        });
    </script>
</body>
</html>
/* Updated: Fri Feb 20 22:06:57 UTC 2026 */
